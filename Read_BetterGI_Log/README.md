# BetterGI 日志分析工具

一个用于分析 Better Genshin Impact 自动化工具日志的网页工具，支持多种交互方式和快捷键操作。

## 功能特点

### 基本功能
- 拖放日志文件进行分析（支持多文件自动合并）
- 移动设备文件上传支持
- 亮色/暗色主题自动切换（根据时间）
- 配置组和任务的详细统计信息展示
- 坐标点查看（卡死点、复活点位置）
- 战斗事件详细查看
- 表格行高亮提示

### 数据显示
- 任务开始/结束时间
- 任务耗时计算
- 各类错误统计：
  - 复活次数
  - 重试次数
  - 疑似卡死次数及坐标
  - 过远跳过次数
  - 战斗超时次数
  - 传送失败次数
- 拾取物统计
- 特殊事件标记（派遣任务、暂停、异常结束）

## 快捷键说明

### 显示控制快捷键
- `T` - 切换时间列（开始时间/结束时间）显示/隐藏
- `Y` - 切换统计列（复活/重试/卡死等）显示/隐藏
- `U` - 切换表格格式（新版/旧版）
- `I` - 切换拾取物列显示/隐藏
- `J` - 隐藏/显示所有统计为0的任务
- `P` - 进入/退出导出模式（显示所有弹窗内容方便分享）

### 视图控制快捷键
- `~` - 切换亮色/暗色主题
- `R` - 重置所有弹窗位置
- `W` - 页面上移
- `S` - 页面下移
- `Alt + F` - 切换全屏模式
- `.` (小数点) - 在新标签页打开工具

### 实用计算功能
- `7` - 计算原神下次40体力时间
- `9` - 计算时间距离现在多久
- `右2` - 计算日期+3天
- `右3` - 计算两个时间点间隔
- `右5` - 计算N天后的日期
- `右7` - 计算原神下次120体力时间
- `右8` - 计算HH.MM后的时间
- `右9` - 计算时间+46小时后

## 新增 J 键功能说明

按下 J 键可以切换显示/隐藏所有统计值为零的任务行。这个功能可以帮助用户：

1. 快速聚焦到有问题的任务（有错误统计的任务）
2. 减少视觉干扰，当只需要查看有问题任务时
3. 简化大型日志的分析过程

### 如何工作
- 当按下 J 键时，工具会检查每个任务的以下统计值：
  - 复活次数
  - 重试次数
  - 疑似卡死次数
  - 过远跳过次数
  - 战斗超时次数
  - 传送失败次数
- 如果所有这些值都为0或空，则该任务行会被隐藏
- 再次按下 J 键会重新显示所有任务

### 视觉反馈
- 屏幕右下角会显示提示："零统计任务: 隐藏" 或 "零统计任务: 显示"
- 提示会在2秒后自动消失

## 使用说明

### 基本使用
1. 将 BetterGI 日志文件（文件名以 better-genshin-impact 开头）拖放到页面区域
2. 或者点击"选择日志文件"按钮（移动设备）
3. 工具会自动解析并显示统计信息

### 查看详细信息
- 将鼠标悬停在统计数字上可以查看详细信息
  - 复活次数：显示每次复活的战斗序号和坐标
  - 疑似卡死次数：显示卡死点的具体坐标
  - 战斗超时次数：显示超时发生的战斗序号
- 双击统计单元格可以重置弹窗位置

### 导出功能
1. 按下 P 键进入导出模式
2. 所有弹窗内容会内联显示在页面中
3. 使用浏览器的"另存为"功能保存页面
4. 再次按下 P 键退出导出模式

## 表格格式说明

### 新版格式
- 单行显示每个任务的所有信息
- 拾取物显示在单独的列中
- 适合查看详细数据

### 旧版格式
- 每个任务占用两行
- 第一行显示基本统计信息
- 第二行显示拾取物信息
- 适合快速浏览

## 特殊标记说明

- <span style="color: orange; font-weight: bold">橙色文字</span>：派遣任务相关事件
- <span style="color: rgb(255, 0, 255); font-weight: bold">粉色文字</span>：快捷键暂停事件
- <span style="color: red; font-weight: bold">红色文字</span>：脚本异常结束警告
- <span style="color: red; font-weight: bold">红色任务名/耗时</span>：有重试但无卡死/复活的任务

## 技术细节

### 支持的日志格式
- BetterGI 0.48.0 及以上版本
- 自动识别日志中的日期信息
- 支持多文件按时间顺序合并

### 解析功能
- 自动识别配置组和任务
- 跟踪角色坐标变化
- 统计各类错误事件
- 记录拾取物品

### 浏览器兼容性
- 支持所有现代浏览器
- 移动设备友好设计
- 响应式布局适配不同屏幕尺寸

## 常见问题

### 为什么有些任务显示"进行中"？
- 日志文件中的任务没有正常结束记录
- 可能是脚本被中断或强制停止

### 为什么坐标信息有时缺失？
- 只有在卡死或复活前有坐标记录时才会显示
- 如果角色没有移动，可能没有坐标记录

### 如何分享分析结果？
- 使用 P 键进入导出模式
- 使用浏览器"另存为"功能保存HTML文件
- 分享保存的HTML文件即可

## 更新日志

### 2025-08-21
- 新增 J 键功能：隐藏/显示所有统计为0的任务
- 新增移动设备文件上传支持
- 优化了行高亮效果
- 修复了复活次数显示问题

### 2025-08-20
- 新增查看死亡前最近坐标功能
- 优化了弹窗交互体验
- 添加了表格行高亮提示

### 更早版本
- 基础日志解析功能
- 多种显示模式切换
- 丰富的快捷键支持
- 导出功能

## 反馈与支持

如果您在使用过程中遇到问题或有改进建议，请通过相关渠道反馈。

---

*注意：此工具仅用于分析 BetterGI 生成的日志文件，不涉及游戏客户端的任何修改。*